# 开发任务清单

## 新单位接入

- [ ] 战斗里接入兵团
  - [ ] stage里用新军团+新AI 不管旧的 只迁移大部分逻辑
- [ ] 军团选中部分接入原来的UI
- [ ] 梳理AI 重构至Graph

## 军团操控

_(待补充)_

## 军团AI

_(待补充)_

## 寻路方案

### 未来优化

- [ ] Y轴空间寻路方案
- [ ] 主角斥力
- [ ] 微小障碍物规避方式（障碍物弹开速度太快了！）
- [ ] 有时候列阵最后几个小兵龟速移动 - 加一个最小速度
- [ ] 流场bake有没有更精确自动的办法？（利用高度图精确baker？）

---

## 已完成任务

### 已完成
- [x] 单位被挤入不可走区域，需要有办法出来
- [x] 锚点牵引逻辑，接近路点时还是要加速通过
- [x] 如果扩展的流场包含了终点，直接以终点为引力点
- [x] 如果tile不包含终点，且有单位走到了0点，立即切换下一段流场
- [x] 空间分区查询邻近单位
- [x] 分段流场计算
- [x] 军团半径的最优估算方法
- [x] 到达终点时恢复阵型
- [x] baker工具里刷成本（普通地面成本128，主道成本1）
